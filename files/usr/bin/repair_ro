#!/bin/sh

ro_status=$(mount | awk '/\/dev\/root/ && /ro,/ {print $6}' | grep -o 'ro' | head -n 1)

if [ "$ro_status" = "ro" ]; then
    echo "Detected root file system: $root_device"
    echo "The file system is currently read-only. Initiating repair..."
        reboot
    else
        echo "file system is OK"
fi
